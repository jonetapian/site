<html lang="pt">
  <head>
    
    <title>Beleza Pura</title>  
      
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="compiler/bootstrap.css">
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
    <link rel="stylesheet" href="compiler/styles.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css">
    <link rel="stylesheet" href="social-login.css">
    <link rel="icon" href="imgs/iconePizza.png" type="image/gif"> 
    <link href="https://fonts.googleapis.com/css?family=Port+Lligat+Slab&display=swap" rel="stylesheet">

    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-app.js"></script>  
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-database.js"></script>
    <script src="firebase.js"></script>
      
    <script src="Login.js"></script>
    <script src="Produto.js"></script>
    <script src="Produto_service.js"></script>
    <script src="FinalizarCompra.js"></script>
    <script src="pizza_model.js"></script>

      
    <script src="https://maps.googleapis.com/maps/api/js?libraries=places&language=en&key=AIzaSyAxUeOKkUigYadZ07KCQuBQLybgzE0foxc"async defer></script>

    
  </head>
    
  <body class="d-flex flex-column h-100 container-fluid">
         
          

              <nav class="navbar fixed-top navbar-expand-lg navbar-light corNav">

                  <div class="container-fluid line">

                      <a class="navbar-brand font corFont my-auto" href="#"><h4 class="my-0">Beleza Pura</h4></a>

                      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navBarSite">
                          <span class="navbar-toggler-icon"></span>
                      </button>

                      <div class="collapse navbar-collapse " id="navBarSite">

                          <ul class="navbar-nav mr-auto ml-3 ">
                              <li class="nav-item ">
                                  <a class="nav-link font ml-3 h5 my-0" href="index.html">Inicio</a>
                              </li>
                              <li class="nav-item dropdown">
                                  <a class="nav-link font ml-3 h5 my-0" href=pizzas.html>Pizzas</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link font ml-3 h5 my-0" href="esfihas.html">Esfihas</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link font ml-3 h5 my-0" href="porcoes.html">Fogazas e Porções</a>
                              </li>

                          </ul>

                          <ul class="navbar-nav">
                              <div class="dropdown">
                                  <li class="nav-item">

                                          <img src="imgs/perfil.png" class="" id="dropdownPerfil" data-toggle="dropdown" data-display="static" aria-haspopup="true" aria-expanded="false" style="width: 40px; height: 40px; cursor: pointer;">
                                          <div class="dropdown-menu dropdown-menu-right" aria-laballedby="dropdownPerfil">
                                              <a href="#" class="dropdown-item" data-toggle="modal" data-target="#divModal" id="btnMenuLogin" disabled>Fazer Login</a>
                                              <a href="#" class="dropdown-item" data-toggle="modal" data-target="#divModalCadastrar" id="btnMenuCadastro">Cadastrar-se</a>
                                              <div class="dropdown-divider"></div>
                                              <a href="#" class="dropdown-item" onclick="logout()" id="btnMenuSair">Sair</a>
                                          </div>


                                  </li>  
                              </div>

                          </ul>

                      </div>

                  </div>
              </nav>
                <div class="botaoFlutuante border border-light border-right-0" data-toggle="modal" data-target="#modalCarrinho">
              <img src="imgs/carrinho.png" class="carrinhoFlutuante" >

          </div>
          <div class="card" style="margin-top: 85px !important;">
              <div class="card-body">
                  <div class="row">
                      <div class="col text-center">
                            <h1 class=" font">
                                    Configurar Dados
                            </h1>
                      </div>
                      

                  </div>
                  <div class="row">
                      <div class="col">
                            <h3 class="fontTexto">Modificar e excluir Dados</h3>
                      </div>
                  </div>
                  <form class="p-2">
                        <div class="form-group row">
                                <div class="dropdown col-sm ">
                                        <button class=" float-right btn btn-danger dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                          produto
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                          <a class="dropdown-item" href="#">Pizza</a>
                                          <a class="dropdown-item" href="#">Esfiha</a>
                                          <a class="dropdown-item" href="#">Batata</a>
                                          <a class="dropdown-item" href="#">Fogazza</a>
                                          <a class="dropdown-item" href="#">Bebida</a>
                                        </div>
                                </div>
                            
                                <div class="dropdown col-sm">
                                    <button class="btn btn-danger dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                      Item
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" disabled>
                                      <a class="dropdown-item" href="#">Pizza</a>
                                      <a class="dropdown-item" href="#">Esfiha</a>
                                      <a class="dropdown-item" href="#">Batata</a>
                                      <a class="dropdown-item" href="#">Fogazza</a>
                                      <a class="dropdown-item" href="#">Bebida</a>
                                    </div>
                            </div>
                        </div>
                        <div class="form-group row">
                          <label for="inputIngredientes" class="col-sm-2 col-form-label fontTexto">ingredientes:</label>
                          <div class="col-sm-10">
                            <input type="text" class="form-control" id="inputIngredientesModificar" placeholder="use ',' para separar os ingredientes">
                          </div>
                        </div>
                        <div class="form-group row">
                            <label for="inputTipo" class="col-sm-2 col-form-label fontTexto">Tipo:</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="inputIngredientes" placeholder="tipo">
                            </div>
                        </div>
                      </form>
                  
              <div class="row">
                    <div class="col">
                          <h3 class="fontTexto">Adicionar Dados</h3>
                    </div>
                </div>
                <form class="p-2" >
                    <div id="formAdicionar">
                      <div class="form-group row">
                              <div class="dropdown col-sm-2">
                                      <button class="btn btn-danger dropdown-toggle" type="button" id="btnType" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        produto
                                      </button>
                                      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <a class="dropdown-item"  onclick="setProductType(1)" >Pizza</a>
                                        <a class="dropdown-item"  onclick="setProductType(2)" >Esfiha</a>
                                        <a class="dropdown-item"  onclick="setProductType(3)" >Batata</a>
                                        <a class="dropdown-item"  onclick="setProductType(4)">Fogazza</a>
                                        <a class="dropdown-item"  onclick="setProductType(5)" >Bebida</a>
                                      </div>
                                    </div>
                        <div class="col-sm-10">
                              <input type="text" class="form-control" id="inputNome" placeholder="nome">
                          </div>
                      </div>
                      <div class="form-group row">
                        <label for="inputIngredientes" class="col-sm-2 col-form-label fontTexto">ingredientes:</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" id="inputIngredientesAdicionar" placeholder="use ',' para separar os ingredientes">
                        </div>
                      </div>
                      <div class="form-group row">
                              <label for="inputTipo" class="col-sm-2 col-form-label fontTexto">Tipo:</label>
                              <div class="col-sm-10">
                                <label class=" fontTexto">Salgada</label>  <input type="radio" id="radioSalgada" name="tipo" class=" " value="Salgada" checked>
                                  <label class="fontTexto ml-3" >Doce </label> <input type="radio" class="" id="radioDoce" name="tipo" value="Doce">
                              </div>
                            </div>

                      <div class="form-group row">
                          <label for="inputValor" class="col-sm-2 col-form-label fontTexto">Valor:</label>
                          <div class="col-sm-10">
                            <input type="number" class="form-control" id="inputValor" placeholder="valor em reais ">

                          </div>
                          
                      </div>
                    </div>
                    <div class="row">
                            <div class="col-sm">
                                    <button type="reset" class="btn-sm btn-success float-right" onclick="getAllInputData()">
                                        Adicionar
                                    </button>
                            </div>
                            
                        </div>
                    </form>

              
            </div>
          </div>
      

      
    <script>
        var pizza = new Pizza();
        var path = '';
        console.log(pizza)
        function setProductType(value){
            if(value != null){
                var drop = document.getElementById("btnType");
                switch(value){
                    case(1):
                        drop.innerHTML = "Pizza"
                    return;
                    case(2):
                        drop.innerHTML = "Esfiha"
                    return;
                    case(3):
                        drop.innerHTML = "Batata"
                        
                    return;
                    case(4):
                        drop.innerHTML = "Fogazza"
                    return;
                    case(5):
                        drop.innerHTML = "Bebida"
                        path = "bebidas";
                        ChangeFormBebida();
                    return;
                }
            }
        }
        //desativar campos que não servem pra bebida
        function ChangeFormBebida(){
            document.getElementById("inputIngredientesAdicionar").disabled = true;
            document.getElementById("radioSalgada").disabled = true;
            document.getElementById("radioDoce").disabled = true;
            var card=['<div class="form-group row"><label for="inputTamanho" class="col-sm-2 col-form-label fontTexto">Tamanho:</label><div class="col-sm-10"><input type="text" class="form-control" id="inputTamanho" placeholder="tamanho da bebida  "></div></div>'];
            document.getElementById("formAdicionar").innerHTML += card;
        }
        function getAllInputData(){
            var nome = document.getElementById("inputNome").value;
            if(path != "bebidas"){
                var ingredientes = document.getElementById("inputIngredientes").value;
                if(document.querySelector('input[name = tipo]:checked') != null){
                     var tipo = document.querySelector('input[name = tipo]:checked').value;
                     alert(tipo);
                }else{
                    alert("por favor selecione um tipo");
                }
            }
            var valor = document.getElementById("inputValor").value;
            alert(valor)
        }
        function logout(){
            
            firebase.auth().signOut().then(function(){
                localStorage.removeItem("email");
                window.location.reload(true);
            }).catch(function(error){
                
            });
            
        }
        (function(){
            var teste = localStorage.getItem("email");
            console.log(teste);
            if(teste){
                const btnMenuLogin = document.getElementById('btnMenuLogin');
                const btnMenuCadastrar = document.getElementById('btnMenuCadastro');
                btnMenuLogin.classList.add("disabled");
                btnMenuCadastrar.classList.add("disabled");
            }else{
                const btnMenuSair = document.getElementById('btnMenuSair');
                btnMenuSair.classList.add("disabled");
            }
            
            const txtEmail = document.getElementById('txtEmail');
            const txtSenha = document.getElementById('txtSenha');
            const btnLogin = document.getElementById('btnLogin');
            var logar;
            logar = new Login();

            btnLogin.addEventListener('click', e => {
                
                const emailLogin = txtEmail.value;
                const senhaLogin = txtSenha.value;
                
                btnLogin.addEventListener("teste", function(e){

                    logar.logar(emailLogin, senhaLogin);
                    
                    
                }, false);

                var event = new CustomEvent("teste", {detail: {beleza: true}}); 

                btnLogin.dispatchEvent(event);
                
                logar.verificarPersistencia();
                var url = window.location.href;
                console.log(url);
                
                
            });
            
            const txtEmailCadastrar = document.getElementById('txtEmailCadastrar');
            const txtSenhaCadastrar = document.getElementById('txtSenhaCadastrar');
            const btnCadastrar = document.getElementById('btnCadastrar');
            const txtNomeCadastrar = document.getElementById('txtNomeCadastrar');
            const txtConfirmarSenhaCadastrar = document.getElementById('txtConfirmarSenhaCadastrar');
            
            btnCadastrar.addEventListener('click', e => {
                const emailCadastrar =  txtEmailCadastrar.value;
                const senhaCadastrar =  txtSenhaCadastrar.value;
                const nomeCadastrar = txtNomeCadastrar.value;
                const confirmarSenha = txtConfirmarSenhaCadastrar.value;
                
                if(emailCadastrar != "" && senhaCadastrar != "" && nomeCadastrar != "" && senhaCadastrar === confirmarSenha){
                   logar.cadastrar(emailCadastrar, senhaCadastrar, nomeCadastrar);
                }else{
                   alert("Digite todos os campos");
                }
                
                
            });


            
            
            window.addEventListener('load', function(){
                
                logar.verificarPersistencia();
            });
            
        }());
        
    </script>
    <script src="dist/jqueryjs/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <script src="dist/popperjs/popper.js"></script>
    <script src="dist/bootstrapjs/bootstrap.js"></script>
  </body>
    
</html>